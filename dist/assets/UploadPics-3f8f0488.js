import{j as e,r as o,U as y,b as m,s as g,u as h}from"./index-b6d5eb37.js";import{M as w}from"./Modal-f9f39862.js";const p=({clickHandler:a,title:i})=>e.jsx("button",{onClick:a,className:"mt-10 mb-3 disabled:bg-gray-500 shrink-0 hover:bg-gray-600 px-2  pt-2 pb-2 rounded-md bg-gray-800 text-white shadow-xl",children:i}),v=()=>e.jsx("div",{className:"fixed z-50 inset-0 backdrop-blur-md grid place-items-center",children:e.jsxs("div",{className:"w-[90%] max-w-md rounded-full h-10 overflow-hidden relative bg-white",children:[e.jsx("div",{className:"w-[100%] h-full bg-green-400  upload"}),e.jsx("p",{className:"absolute text-center  text-lg mt-1 text-gray-700 inset-0 uppercase  ",children:"Uploading......"})]})}),S=()=>{const[a,i]=o.useState(),[x,c]=o.useState(""),[f,d]=o.useState(!1),r=o.useRef(null),[b,t]=o.useState(!1),{user:l}=o.useContext(y),u=async n=>{if(!r.current.value)return alert("Please choose an Image!!");if(!l)alert("Please Login First!!");else if((l==null?void 0:l.uid)==="QyDKhU4oA4WWSVXYd7tJZOlJq3R2"||(l==null?void 0:l.uid)==="9UXPrVmHTqMSyhaFoWlOIGaROLt1"){if(!r.current.value)return alert("choose an image first!");t(!0);try{if(n==="Featured"){const s=m(g,`featuredImages/${a.name}${Math.round(Math.random()*100)}`);await h(s,a).then(()=>{t(!1),c("Featured Collection"),d(!0),r.current.value=""}).catch(()=>{t(!1),alert("Only Image is allowed to upload!")})}else if(n==="Collection"){const s=m(g,`images/${a.name}${Math.round(Math.random()*100)}`);await h(s,a).then(()=>{t(!1),c("Collection"),d(!0),r.current.value=""}).catch(()=>{t(!1),alert("Only Image is allowed to upload!")})}else if(n==="Mehndi"){const s=m(g,`mehndiPics/${a.name}${Math.round(Math.random()*100)}`);await h(s,a).then(()=>{t(!1),c("Mehndi"),d(!0),r.current.value=""}).catch(()=>{t(!1),alert("Only Image is allowed to upload!")})}}catch(s){if(t(!1),d(!1),s.code==="storage/unauthorized")return alert("Sorry! You don't have permission to Upload images!!");alert("Error occurred while uploading image!"),console.error(s)}}else alert("Sorry! You are not allowed to Upload Images!!")},j=n=>{i(n.target.files[0])};return e.jsxs("div",{className:"w-screen  flex flex-col mt-5 items-center gap-y-6 pb-4",children:[e.jsxs("h1",{className:"text-center bg-gradient-to-bl from-orange-200 bg-orange-500 p-2 text-gray-900 rounded-xl text-3xl uppercase",children:["Upload ",e.jsx("span",{className:"pl-2 pr-2    rounded ",children:"image"})]}),e.jsxs("div",{className:"  bg-gradient-to-t from-violet-200 to bg-violet-400  flex flex-col gap-5 pl-10 pr-10 pt-16 md:p-28 pb-5 rounded-md shadow-xl  ",children:[e.jsx("form",{children:e.jsxs("div",{className:"relative grid place-items-center  bg-fuchsia-400",children:[e.jsx("input",{ref:r,accept:"image/*",onChange:j,className:"border-dashed w-full border-2  border-red-500  bg-gray-200 rounded p-2",type:"file"}),e.jsx("button",{type:"reset",className:"py-1 absolute -top-2 -right-8 rotate-45 px-4 mx-auto rounded-full bg-red-700 text-gray-100",children:"clear"})]})}),e.jsxs("div",{className:"flex justify-center flex-wrap gap-x-4 ",children:[e.jsx(p,{clickHandler:()=>u("Featured"),title:"Add to Featured"}),e.jsx(p,{clickHandler:()=>u("Collection"),title:"Add to Collection"}),e.jsx(p,{clickHandler:()=>u("Mehndi"),title:"Add Mehndi"})]}),e.jsxs("p",{className:"text-gray-600 mt-4 text-center",children:["please ",e.jsx("span",{}),"reduce the imaze size before uploading!!"]}),b&&e.jsx(v,{}),f&&e.jsx(w,{msg:`Successfully Added to the ${x}!!`,setShowModal:d,success:!0})]})]})};export{S as default};
