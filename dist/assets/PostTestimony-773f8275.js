import{r,U as g,C as w,j as t,c as y,d as j,a as S}from"./index-b6d5eb37.js";import{E as C}from"./Error-d9b6a220.js";import{M as N}from"./Modal-f9f39862.js";const U=()=>{const{user:e,setShowSignIn:m}=r.useContext(g),{getComments:u}=r.useContext(w),[x,c]=r.useState(!1),[o,i]=r.useState(""),[l,a]=r.useState(""),[f,n]=r.useState(!1);r.useEffect(()=>{const s=setTimeout(()=>a(""),2500);return()=>clearTimeout(s)},[l]);const h=async s=>{if(s.preventDefault(),e||m(!0),e&&!o)return a("Please Write Some Nice Words!");if(e&&o){if(o.length<5)return a("please Write some more Words!");if(o.length>110)return a("please don't exceed more than 110 characters!");try{n(!0);const d=y(j,"testimonies");e&&o&&(await S(d,{userId:e==null?void 0:e.uid,id:Date.now(),displayName:e.displayName,photoURL:e.photoURL,comment:o}),c(!0),u(),n(!1),i(""))}catch(d){console.log(d),n(!1),alert("couldn't be uploaded ! please try again!!")}}},p=s=>s==null?void 0:s.split(" ")[0],b=s=>{a(""),i(s.target.value)};return t.jsxs("div",{className:"mt-3 border-4 border-orange-600 border-dotted flex flex-col mx-auto dark:text-gray-200 max-w-2xl p-5 mb-3",children:[x&&t.jsx(N,{msg:"Posted Successfully!",setShowModal:c,success:!0}),t.jsxs("h1",{className:"text-center text-sky-800 dark:text-orange-600 text-2xl font-semibold uppercase ",children:["hey"," ",e&&t.jsx("span",{className:"text-2xl  bg-pink-600 pl-2 pr-2 font-semibold   rounded-sm text-white",children:p(e==null?void 0:e.displayName)})," ","please say some nice words!"," "]}),t.jsxs("form",{onSubmit:h,className:"flex flex-col",children:[t.jsxs("label",{className:"ml-2 cursor-pointer font-serif font-medium mb-2 text-lg sm:text-xl",htmlFor:"testimony",children:["Write Your Comment",t.jsx("span",{className:"text-gray-400",children:"(public)"})," :"]}),t.jsx("textarea",{onChange:b,placeholder:"write here....",value:o,className:`${l?"bg-red-600":"bg-rose-500 focus:bg-rose-400"} border-s-2 pl-4 focus:outline-none text-black font-serif tracking-wider pr-4  transition-all duration-150 ease-out pt-1 pb-1 shadow-lg hover:shadow-xl focus:shadow-xl rounded-xl md:rounded-2xl md:shadow-2xl`,name:"testimony",id:"testimony",cols:"5",rows:"4"}),l&&t.jsx(C,{error:l}),t.jsx("button",{type:"submit",disabled:f,className:"w-1/2 pulse disabled:bg-gray-500 bg-gradient-to-b from-blue-500 to bg-blue-600 hover:bg-blue-700  hover:shadow-2xl text-white rounded-lg mx-auto py-2 mt-6 shadow-xl  text-lg",children:"Post"})]})]})};export{U as default};
